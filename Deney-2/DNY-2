list p=16F877
INCLUDE <P16F877.INC>
__config H'3F31'

COUNTER		EQU	0X22
REFERANS	EQU	0X23		

	ORG 	0X00
	GOTO 	SETUP

	ORG 	0X04
	GOTO	INTERRUPT

INTERRUPT

	BTFSS	PIR1,TMR1IF
	RETFIE
	BCF		PIR1,TMR1IF
	
	BANKSEL	TMR1H

	MOVLW	0X3C
	MOVWF	TMR1H
	MOVLW	0XB0
	MOVWF	TMR1L
	DECFSZ	COUNTER,1
	RETFIE
	MOVF	REFERANS,W
	MOVWF	COUNTER
	INCF	PORTB,F
	RETFIE

SETUP
	
	BANKSEL	ADCON1
	MOVLW	0X06
	MOVWF	ADCON1

	BANKSEL	TRISB
	BSF		TRISA,0
	BSF		TRISA,1
	CLRF	TRISB
	BANKSEL	PORTB
	CLRF	PORTA
	CLRF	PORTB
	MOVLW	0X00
	MOVWF	PORTB

	BANKSEL	INTCON
	BSF		INTCON,GIE
	BSF		INTCON,PEIE

	BANKSEL	PIE1
	BSF		PIE1,TMR1IE

	BANKSEL	TMR1H
	MOVLW	0X3C
	MOVWF	TMR1H
	MOVLW	0XB0
	MOVWF	TMR1L

	BANKSEL	T1CON
	MOVLW	B'00010001'
	MOVWF	T1CON

	BANKSEL	COUNTER
	MOVLW	D'10'
	MOVWF	COUNTER
	MOVWF	REFERANS

LOOP

;	BTFSC	PORTA,0
	GOTO	INCREMENT
	BTFSS	PORTA,1
	GOTO	LOOP
	GOTO	DECREMENT
	
INCREMENT

	MOVLW	0X01
	ADDWF	REFERANS
	MOVLW	0X0F
	SUBWF	REFERANS,W
	BTFSS	STATUS,Z
	GOTO	LOOP
	MOVLW	0X0F
	MOVWF	REFERANS
	GOTO	LOOP

DECREMENT

	DECF	REFERANS,
	MOVLW	0X05
	MOVWF	REFERANS
	BTFSS	STATUS,Z
	GOTO	LOOP
	MOVLW	0X05
	MOVWF	REFERANS
	GOTO	LOOP
	
END